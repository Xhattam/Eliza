# -*- coding: utf-8 -*-
import Tkinter
import time


"""
Author: JTanon
Created on the 08/06/2013
"""

class Window(object):

  def __init__(self):
		self.root = Tkinter.Tk()

		#Main window and widgets parameters
		self.eliza = Tkinter.Label(text = "Eliza", borderwidth = 10, font = "Arial 14")
		self.display = Tkinter.Text(font = "Times 10", state = Tkinter.DISABLED)
		self.user_entry = Tkinter.Entry()
		self.send_button = Tkinter.Button(text = "Envoyer")
		self.quit_button = Tkinter.Button(text = "Quitter Eliza", command = root.destroy)
	
		self.user_entry.config(width = 85) # user's entry
		self.display.config(width = 100, height = 15) # displays Eliza's answer
		
		#Placement of widgets
		self.eliza.grid()
		self.display.grid()
		self.user_entry.grid()
		self.send_button.grid(row = 6, column = 0, sticky = "s" + "e")
		self.quit_button.grid(row = 6, column = 0, sticky = "s" + "w")

	def sayHelloEliza():
		self.display.config(state = Tkinter.NORMAL)
		self.display.insert("0.0", "Bonjour, je suis Eliza. Que puis-je faire pour vous?")
		self.display.config(state = Tkinter.DISABLED)


	#Gets user input, Adds input to stack
	#Displays user's entry in main window while deleting it from user_entry window
	def speakToMe(event): 
		if event.keysym == "Return" or event.num == 1:
			display.config(state = Tkinter.NORMAL)
			entry = user_entry.get()
			#self.stackWrite(self, str+(entry.strip())) adds user's entry to stack
			display.insert(Tkinter.END, "\n"+user_entry.get())
			user_entry.delete(0, len(user_entry.get()))
			send_button.config(state = Tkinter.DISABLED)
			user_entry.config(state = Tkinter.DISABLED)
			display.config(state = Tkinter.DISABLED)


	#NOT FULLY FUNCTIONNAL YET (only clic works and message not displayed)
	def byeThen(event):
		if event.keysym == "Return" or event.num == 1:
			end = "Passez une bonne journ√©e!"
			display.config(state = Tkinter.NORMAL)
			display.insert(Tkinter.END, "\n"+ "Bye")
			display.config(state = Tkinter.DISABLED)
			time.sleep(2) 

		
#Binds keyboard/mouse actions to widgets
user_entry.bind("<Key>", speakToMe)
user_entry.focus_set()

send_button.bind("<Button-1>", speakToMe)
send_button.bind("<Key>", speakToMe)
send_button.focus_set()

quit_button.bind("<Button-1>", byeThen)
quit_button.bind("<Key>", byeThen)
quit_button.focus_set()

root.mainloop()


#TO BE MOVED LATER
#to add in the function that will display Eliza's answer
send_button.config(state = Tkinter.NORMAL)
display.config(state = Tkinter.NORMAL)
display.config(state = Tkinter.DISABLED)






